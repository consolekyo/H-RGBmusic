C51 COMPILER V9.01   µ¥Æ¬»_Éî_®                                                            05/24/2018 08:51:24 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE µ¥Æ¬»_Éî_®
OBJECT MODULE PLACED IN .\out\µ¥Æ¬»úÉî°®.obj
COMPILER INVOKED BY: D:\programfiles-install\keilMDK523\C51\BIN\C51.EXE files\µ¥Æ¬»úÉî°®.c OPTIMIZE(8,SPEED) BROWSE DEBU
                    -G OBJECTEXTEND PRINT(.\µ¥Æ¬»úÉî°®.lst) OBJECT(.\out\µ¥Æ¬»úÉî°®.obj)

line level    source

   1          //////////////////////////////////////////////
   2          //51µ¥Æ¬»úÒôÀÖ²¥·ÅÆ÷³ÌÐò                                        //
   3          //¹²Èý¸ö°´¼ü:ÉÏÒ»Çú¡¢ÏÂÒ»Çú¡¢²¥·Å\ÔÝÍ£          //
   4          //²¥·ÅÍêÒ»Ê×¸èÇúÎÞ°´¼ü°´ÏÂÊ±Ë³Ðò²¥·ÅÏÂÒ»Çú      //
   5          //////////////////////////////////////////////
   6          
   7          //#include<STC12C5A60S2.H>
   8          #include<REG52.H>
   9          typedef unsigned char u8;
  10          
  11          
  12          
  13          //#define sound_amount 5 //¸èÇúµÄÊýÁ¿
  14          sbit play_up=P3^0;         //ÉÏÒ»Ê×¸è
  15          sbit play_down=P3^1;   //ÏÂÒ»Ê×¸è
  16          sbit pause=P3^2;       //²¥·Å\ÔÝÍ£
  17          sbit speaker=P2^0;     //ÎÞÔ´·äÃùÆ÷
  18          
  19          
  20          //////////////////////////////////////////////
  21          unsigned char timer0h,timer0l,time;//timer0h,timer0lÎª¶¨Ê±Æ÷T0µÄ¸ßµÍÎ»³õÖµ,timeÎª¶ÔÓ¦µÄ½ÚÅÄÊ±¼ä
  22          unsigned char music_num;       //music_numÎª¸èÇú±àºÅ,music_num=0±íÊ¾¸Õ¿ª»úÊ±µÄ×´Ì¬,numÊÇ²éÕÒ¸èÇúÊý¾Ý±íµÄµØ
             -Ö·
  23          unsigned int num;
  24          signed int fre;                   //¶ÔÓ¦ÆµÂÊÊý¾Ý±íµÄµØÖ·
  25          bit play_enable;                   //¸èÇú²¥·ÅµÄÊ¹ÄÜ±êÖ¾Î»,ÓÃÓÚ²¥·Å\ÔÝÍ£
  26          void delay(unsigned char t);       //ÑÓÊ±×Óº¯Êý,¿ØÖÆ·¢ÒôµÄÊ±¼ä³¤¶È
  27          void delayms(unsigned int t);      //ÆÕÍ¨ÑÓÊ±×Ó³ÌÐò,¿ÉÓÃÓÚ°´¼üÏû¶¶
  28          void song(void);                           //ÑÝ×àÒ»¸öÒô·û
  29          void music_play(void);             //²¥·Å¸èÇú
  30          //////////////////////////////////////////////
  31          //Ã¿Èý¸öÊý×Ö,´ú±íÒ»¸öÒô·û
  32          //µÚÒ»¸öÊý×ÖÊÇÒô·ûµÄÊýÖµ1234567Ö®Ò»(µÚ¼¸¸öÒô),´ú±í¶ßÀ´ßä·¢...
  33          //µÚ¶þ¸öÊý×ÖÊÇ0123Ö®Ò»,´ú±íµÍÒô\ÖÐÒô\¸ßÒô\³¬¸ßÒô(µÚ¼¸¸ö°Ë¶È)
  34          //µÚÈý¸öÊý×ÖÊÇÊ±¼ä³¤¶È,ÒÔ°ëÅÄÎªµ¥Î»,ÀÖÇúÊý¾Ý±íµÄ½áÎ²ÊÇÈý¸ö0
  35          //////////////////////////////////////////////
  36          
  37          unsigned char code song1[]={
  38               12,1,1, 2,2,1, 4,2,4, 9,2,4, 11,2,3, 12,2,3, 4,2,10, 2,2,3,        
  39                   7,2,3, 2,2,2, 12,1,8, 11,1,3, 7,1,3, 9,1,2, 5,0,2, 12,0,2,     
  40                   5,1,2, 7,1,2, 9,1,3, 4,2,3, 2,2,2, 9,2,8, 7,1,1, 9,1,1,                 
  41                   11,1,1, 12,1,1, 2,2,1, 4,2,1, 5,2,1, 7,2,1, 9,2,1, 11,2,1,    
  42                   12,2,1, 2,3,1, 4,2,4, 9,2,4, 11,2,4, 12,2,4, 11,2,4, 4,3,2, 
  43                   2,3,1, 12,2,1, 2,3,2, 12,2,1, 11,2,1, 12,2,1, 11,2,1, 9,2,1,  
  44                   7,2,1, 9,2,3, 4,2,3, 12,1,6, 2,4,2, 2,2,1, 11,1,1, 7,2,3,         
  45                   2,2,3, 11,1,6, 2,4,2, 12,1,1, 2,2,1, 4,2,1, 9,1,1, 12,1,1,    
  46                   9,1,1, 7,2,2, 5,2,2, 4,2,6, 2,4,2, 12,1,1, 2,2,1, 4,2,1,          
  47                   11,1,1, 2,2,1, 11,1,1, 9,2,2, 7,2,2, 4,2,2, 7,2,2, 9,2,2,        
  48                   11,2,2, 2,3,3, 4,3,3, 7,3,2, 2,3,4, 12,2,4, 11,2,2, 4,0,2,  
  49                   9,0,2, 11,0,2, 12,0,2, 4,1,2, 9,1,2, 11,1,2, 12,1,12, 9,1,2,
  50                   12,1,2, 2,2,6, 2,2,2, 2,2,2, 4,2,1, 2,2,1, 12,1,2, 11,1,2,     
  51                   12,1,8, 2,4,4, 4,2,2, 7,2,2, 9,2,6, 12,2,2, 11,2,2, 9,2,2,    
  52                   7,2,2, 12,1,2, 2,2,2, 4,2,1, 4,2,5, 2,4,2, 4,2,2, 7,2,2,               
  53                   4,2,2, 2,2,6, 2,2,2, 2,2,2, 4,2,1, 2,2,1, 12,1,2, 11,1,2,              
C51 COMPILER V9.01   µ¥Æ¬»_Éî_®                                                            05/24/2018 08:51:24 PAGE 2   

  54                   12,1,2, 2,4,2, 2,2,2, 2,4,2, 4,2,4, 2,4,2, 9,1,1, 11,1,1,         
  55                   12,1,6, 12,1,2, 12,1,2, 12,1,2, 2,2,2, 12,1,1, 4,2,9, 2,4,4,  
  56                   9,1,2, 12,1,2,                                                                                  
  57                   0,0,0 };
  58          
  59          unsigned char code song2[]={
  60               2,2,6, 2,2,2, 2,2,2, 4,2,2, 7,2,2, 12,1,2, 11,1,2, 12,1,1,         
  61                   12,1,5, 2,4,2, 12,1,2, 4,2,2, 7,2,2, 9,2,6, 12,2,2, 11,2,2,    
  62                   12,2,2, 2,3,2, 11,2,2, 9,2,2, 7,2,1, 7,2,5, 2,4,6, 4,2,2,                      
  63                   5,2,2, 7,2,2, 9,2,2, 2,3,2, 11,2,4, 2,4,2, 2,2,2, 12,1,2,                        
  64                   2,2,2, 4,2,2, 11,2,2, 9,2,4, 2,4,6, 9,2,2, 11,2,2, 12,2,2,                              
  65                   2,3,3, 11,2,3, 9,2,2, 4,0,2, 12,0,2, 11,0,2, 12,0,2, 2,1,2,                                    
  66                   4,1,2, 2,1,2, 4,1,2, 9,0,2, 2,1,2, 1,1,4, 1,2,2, 1,3,2,                                                 
  67                   11,2,2, 11,2,2, 9,2,2, 9,2,2, 8,2,1, 9,2,3, 8,2,2, 4,2,2,                                              
  68                   1,2,2, 4,2,8, 2,4,2, 1,2,2, 2,2,2, 4,2,2, 6,2,2, 9,1,2,                                                
  69                   9,1,2, 9,1,1, 9,1,1, 11,1,3, 9,1,3, 1,2,10, 2,4,2, 1,2,2,                                         
  70                   11,1,2, 9,1,2, 9,1,6, 9,2,6, 8,2,2, 9,2,2, 11,2,3, 4,2,3,                                        
  71                   4,2,6, 2,4,4, 1,3,3, 11,2,3, 9,2,2, 9,2,6, 9,2,2, 2,3,3,                                       
  72                   1,3,3, 11,2,2, 9,2,3, 6,2,3, 9,2,2, 1,3,4, 1,0,4, 2,4,2, 
  73                   1,0,2, 2,4,2, 2,0,4, 2,0,2, 2,0,2, 2,0,2, 4,0,2, 4,2,2, 
  74                   4,3,2, 2,3,2, 2,3,2, 12,2,2, 12,2,2, 11,2,1, 9,2,3, 9,2,2,                
  75                   12,2,2, 2,3,4, 12,2,2, 12,2,2, 11,2,1, 11,2,3, 11,2,2, 12,2,2,           
  76                   2,3,2, 2,4,2, 11,2,2, 12,2,2, 2,3,2, 2,4,2, 12,2,2, 2,3,2, 
  77                   4,3,4, 2,3,2, 2,3,2, 12,2,1, 12,2,5, 2,4,2, 4,2,2, 2,2,3,                       
  78                   4,2,3, 5,2,2, 5,2,6, 5,2,2, 4,2,3, 6,2,3, 8,2,2, 11,2,4,                        
  79                   2,3,4, 2,3,2, 12,2,2, 2,3,2, 12,2,1, 4,3,15, 1,3,4, 2,3,2,             
  80                   4,3,4, 5,3,6, 9,2,2, 9,2,8, 4,0,4, 8,2,4, 9,2,4, 11,2,4,                       
  81                   2,3,3, 4,3,3, 2,3,2, 12,2,3, 4,2,3, 12,2,10, 9,2,2, 11,2,2,       
  82                   12,2,2, 12,2,8, 5,2,4, 9,2,2, 4,3,2, 2,3,4, 2,3,2, 12,2,2,    
  83                   11,2,4, 9,2,2, 7,2,4, 
  84                   0,0,0 };
  85          
  86          unsigned char code song3[]={
  87               9,2,6, 12,1,2, 11,1,3, 2,2,3, 12,1,2, 11,1,3, 7,1,3, 9,1,2,   
  88                   9,2,2, 11,2,2, 12,2,2, 12,2,8, 5,2,2, 9,2,2, 4,3,2, 2,3,4,                                       
  89                   2,3,2, 12,2,2, 11,2,4, 9,2,2, 7,2,4, 11,2,6, 9,2,10, 2,4,8,                                       
  90                   12,2,2, 2,3,2, 4,3,2, 7,3,2, 11,3,1, 12,3,1, 11,3,1, 9,3,1,                                      
  91                   7,3,2, 4,3,2, 2,3,2, 12,2,2, 4,3,2, 7,3,2, 9,3,8, 2,4,2,                                
  92                   9,1,2, 12,1,2,                                                           
  93                   0,0,0 };
  94          
  95          unsigned char code song4[]={
  96               0,0,0};
  97          
  98          unsigned char code song5[]={
  99               11,2,6, 9,2,6, 2,2,2, 12,1,2, 11,1,3, 7,1,3, 9,1,10, 9,1,2,   
 100                   2,1,2, 11,1,2, 2,1,2, 12,1,2, 2,2,2, 4,2,2, 7,2,2, 9,2,8,                       
 101                   2,4,2, 4,2,2, 9,2,2, 11,2,2, 1,3,2, 1,3,2, 1,3,2, 1,3,1,                  
 102                   1,3,3, 1,3,2, 11,2,2, 9,2,2, 11,2,3, 8,2,3, 8,2,6, 2,4,2,               
 103                   4,2,2, 6,2,2, 6,2,2, 6,2,2, 6,2,1, 6,2,3, 6,2,1, 6,2,1,                 
 104                   9,2,2, 11,2,2, 11,2,3, 1,3,3, 1,3,6, 2,4,2, 9,2,1, 11,2,1,   
 105                   1,3,2, 1,3,2, 1,3,2, 1,3,1, 1,3,3, 1,3,1, 1,3,1, 1,3,2,         
 106                   6,3,2, 4,3,6, 1,3,1, 11,2,1, 1,3,8, 6,2,2, 8,2,2, 9,2,2,         
 107                   9,2,4, 6,2,2, 9,2,2, 1,3,2, 2,3,3, 1,3,3, 2,3,2, 11,2,3,        
 108                   9,2,3, 11,2,2, 2,4,4, 1,3,12, 2,4,10, 1,3,2, 4,3,4, 6,3,8, 
 109                   4,3,6, 1,3,1, 11,2,1, 1,3,10, 9,2,2, 1,3,4, 11,2,4, 1,3,2,     
 110                   8,2,2, 2,4,2, 4,2,2, 2,4,2, 6,2,10, 2,4,2, 1,2,2, 6,2,2,               
 111                   8,2,2, 9,2,2, 6,2,2, 8,2,2, 9,2,2, 1,3,4, 9,3,4, 8,3,8,           
 112                   2,4,2, 8,3,2, 9,3,2, 11,3,4, 9,3,2, 8,3,2, 4,3,6, 11,2,4,              
 113                   1,3,8, 2,4,2, 6,2,2, 6,2,2, 8,2,2, 9,2,2, 6,2,2, 8,2,2,          
 114                   9,2,2, 1,3,4, 9,3,3, 11,3,1, 11,3,3, 1,4,3, 9,3,2, 8,3,3,       
 115                   4,3,3, 1,3,10, 2,4,8, 9,2,1, 6,2,1, 2,2,1, 9,1,1, 2,4,2, 
C51 COMPILER V9.01   µ¥Æ¬»_Éî_®                                                            05/24/2018 08:51:24 PAGE 3   

 116                   8,2,1, 4,2,1, 11,2,1, 8,1,1, 2,4,2, 9,2,1, 6,2,1, 2,2,1,       
 117                   9,1,1, 2,4,2, 11,2,1, 8,2,1, 4,2,1, 11,1,1, 2,4,2, 8,2,1,      
 118                   4,2,1, 11,1,1, 9,1,1, 4,2,1, 11,1,1, 8,1,1, 4,1,1, 9,2,1,      
 119                   6,2,1, 1,2,1, 9,1,1, 2,4,2, 8,2,1, 4,2,1, 11,1,1, 8,1,1,       
 120                   2,4,2, 9,2,1, 6,2,1, 2,2,1, 9,1,1, 2,4,2, 11,2,1, 8,2,1, 
 121                   4,2,1, 11,1,1, 2,4,2, 8,2,1, 4,2,1, 11,1,1, 8,1,1, 4,2,1,        
 122                   11,1,1, 8,1,1, 4,1,1, 1,3,1, 9,2,1, 6,2,1, 1,2,1, 2,4,2,        
 123                   11,2,1, 8,2,1, 4,2,1, 11,1,1, 2,4,2, 1,3,1, 9,2,1, 6,2,1, 
 124                   1,2,1, 2,4,2, 4,3,1, 11,2,1, 8,2,1, 4,2,1, 2,4,2, 9,2,1,        
 125                   4,2,1, 1,2,1, 9,1,1, 8,2,1, 4,2,1, 1,2,1, 8,1,1, 9,2,1,         
 126                   6,2,1, 2,2,1, 9,1,1, 2,2,1, 6,2,1, 9,2,4, 11,2,4, 2,3,2,  
 127                   1,3,20,                                                                                                   
 128                   0,0,0 };
 129          
 130          unsigned char code song6[]={
 131               2,4,10, 1,2,2, 1,3,2, 11,2,2, 11,2,2, 9,2,2, 9,2,2, 8,2,1,          
 132                   9,2,3, 8,2,2, 4,2,2, 1,2,2, 4,2,8, 2,4,2, 1,2,2, 2,2,2,           
 133                   4,2,2, 6,2,2, 9,1,2, 9,1,2, 9,1,2, 11,1,3, 9,1,3, 1,2,10,        
 134                   2,4,2, 1,2,2, 11,1,2, 9,1,2, 9,1,6, 9,2,6, 8,2,2, 9,2,2,        
 135                   11,2,3, 4,2,3, 4,2,4, 1,2,1, 2,2,1, 4,2,1, 6,2,1, 8,2,1,       
 136                   9,2,1, 11,2,1, 1,3,3, 11,2,3, 9,2,8, 9,2,2, 2,3,3, 1,3,3,      
 137                   11,2,2, 9,2,3, 6,2,3, 9,2,2, 1,3,2, 1,2,1, 5,2,1, 8,2,1,       
 138                   1,3,1, 5,3,1, 8,3,1, 1,4,1, 8,3,1, 5,3,1, 1,3,1, 8,2,1,        
 139                   5,2,1, 1,2,1, 8,1,1, 5,1,1, 1,1,4, 9,1,3, 9,1,1, 2,4,2,        
 140                   11,1,4, 4,2,2, 4,3,2, 2,3,2, 2,3,2, 12,2,2, 12,2,2, 11,2,1, 
 141                   9,2,3, 9,2,2, 12,2,2, 2,3,4, 12,2,2, 12,2,2, 11,2,1, 11,2,3,   
 142                   11,2,2, 12,2,2, 2,3,2, 2,4,2, 11,2,2, 12,2,2, 2,3,2, 2,4,2,    
 143                   12,2,2, 2,3,2, 4,3,4, 2,3,2, 2,3,2, 12,2,1, 12,2,5, 2,4,2,    
 144                   9,2,1, 11,2,1, 12,2,10, 11,2,2, 12,2,2, 2,3,2, 2,4,4, 4,2,4, 
 145                   4,3,4, 2,3,4, 2,3,2, 12,2,2, 12,2,2, 11,2,1, 12,2,3, 2,3,4,    
 146                   4,3,8, 1,3,4, 2,3,2, 4,3,4, 5,3,6, 9,2,2, 9,2,8, 2,4,4,                
 147                   8,2,4, 9,2,4, 11,2,4, 2,3,3, 4,3,3, 2,3,2, 12,2,3, 4,2,3,       
 148                   12,2,10, 9,2,2, 11,2,2, 12,2,2, 12,2,8, 5,2,4, 9,2,2, 4,3,2,   
 149                   2,3,4, 2,3,2, 12,2,2, 11,2,4, 9,2,2, 7,2,4, 9,2,6, 12,1,2,    
 150                   11,1,3, 2,2,3, 12,1,2, 11,1,3, 7,1,1, 2,4,2, 9,1,2, 9,2,2,    
 151                   11,2,2, 12,2,2, 12,2,8, 5,2,4, 9,2,2, 4,3,2, 2,3,4, 2,3,2,     
 152                   12,2,2, 11,2,4, 9,2,2, 7,2,4, 11,2,6, 9,2,2, 9,0,2, 12,0,2,   
 153                   5,1,2, 7,1,2, 9,1,18, 2,4,20,                                                                                    
 154                   0,0,0};     
 155          
 156          unsigned char code song7[]={
 157               0,0,0};
 158          
 159          unsigned char code song8[]={
 160               0,0,0}; 
 161          
 162          // ÆµÂÊ-°ëÖÜÆÚÊý¾Ý±í ¸ß°ËÎ»  ¹²±£´æÁËËÄ¸ö°Ë¶ÈµÄ28¸öÆµÂÊÊý¾Ý
 163          unsigned char code FREQH[]={
 164              248,248,249,249,250,250,250,251,251,251,251,252,   
 165                  252,252,252,252,253,253,253,253,253,253,253,254,           
 166                  254,254,254,254,254,254,254,254,254,254,254,255,           
 167                  255,255,255,255,255,255,255,255,255,255,255,255,
 168                  255,0};
 169          
 170          // ÆµÂÊ-°ëÖÜÆÚÊý¾Ý±í µÍ°ËÎ»                                                                     
 171          unsigned char code FREQL[]={
 172              140,243,91,184,21,103,185,4,75,144,207,12,   
 173                  68,121,172,220,9,52,92,130,166,200,226,6,                
 174                  34,61,86,110,133,154,174,193,211,228,244,3,             
 175                  17,31,43,55,66,77,87,97,105,114,122,129,
 176                  136,0}; 
 177          void KEY()
C51 COMPILER V9.01   µ¥Æ¬»_Éî_®                                                            05/24/2018 08:51:24 PAGE 4   

 178          {
 179   1              if(!pause)              //ÔÝÍ£¼ü´¦Àí
 180   1                      {
 181   2                      delayms(5);
 182   2                      if(!pause)
 183   2                      {
 184   3                              TR0=0;
 185   3                              speaker=1;
 186   3                              if(music_num==0)    //music_num=0Ö»ÓÐÔÚ¸Õ¿ª»ú,ÇÒÎ´°´ÏÂÔÝÍ£¼üÊ±´æÔÚ,±íÊ¾¸Õ¿ª»úÊ±µÄ×´Ì¬,°´ÏÂºó´ÓµÚÒ»Ê×¿ªÊ
             -¼²¥·Å
 187   3                              {
 188   4                                      music_num=1;    //¸èÇúÐòºÅÖÃ1
 189   4                                      num=0;          //´ÓÍ·²¥·Å
 190   4                                      play_enable=1;  //ÔÊÐí²¥·Å
 191   4                              }
 192   3                              else
 193   3                              {
 194   4                                      play_enable=~play_enable;
 195   4                                  speaker=1;
 196   4                              }
 197   3                              while(!pause)    //Èô°´×ÅÔÝÍ£¼ü²»·ÅÊÖÊ±µÄ´¦Àí
 198   3                              {
 199   4                              if(play_enable==0){}            //Èç¹ûÊÇÔÝÍ££¬ÔòÏÔÊ¾Ê±¼ä²»±ä//£¨ÔÝÍ£Ê±play_enable==0£©
 200   4                              }
 201   3      
 202   3                        }//ÔÝÍ£¼ü´¦Àí½áÊø
 203   2              }//while½áÊø
 204   1      
 205   1                      if((!play_up)&&(music_num!=0)) //ÉÏÒ»Ê×°´¼ü
 206   1                      {
 207   2                      delayms(5);
 208   2                      if((!play_up)&&(music_num!=0))
 209   2                      {
 210   3                         TR0=0;
 211   3                         speaker=1;
 212   3                              music_num-=1;//¸èÇú±àºÅ¼õÒ»
 213   3                              if(music_num<=0)
 214   3                              music_num=8;
 215   3                              num=0;           //´ÓÍ·¿ªÊ¼²¥·Å
 216   3      
 217   3      /*                      if(music_num==(sound_amount+1))
 218   3                                      music_num=1;     */
 219   3                              delayms(500);//¸èÇúÇÐ»»Ê±ÑÓÊ±0.5S
 220   3                      }       
 221   2                      }
 222   1      
 223   1                      if((!play_down)&&(music_num!=0))
 224   1                      {
 225   2                      delayms(5);
 226   2                      if((!play_down)&&(music_num!=0))
 227   2                      {   
 228   3                              TR0=0;
 229   3                              speaker=1;
 230   3                              music_num+=1;//¸èÇú±àºÅ¼ÓÒ»
 231   3                              if(music_num>=9)
 232   3                              music_num=1;
 233   3                              num=0;           //´ÓÍ·¿ªÊ¼²¥·Å
 234   3      
 235   3              /*              if(music_num==0)
 236   3                                      music_num=sound_amount;           */
 237   3                              delayms(500);//¸èÇúÇÐ»»Ê±ÑÓÊ±0.5S
 238   3                      }
C51 COMPILER V9.01   µ¥Æ¬»_Éî_®                                                            05/24/2018 08:51:24 PAGE 5   

 239   2                      }
 240   1      }
 241          void main(void)
 242          {
 243   1              TMOD=0x11; //T0 T1 ¾ùÔÚ¹¤×÷·½Ê½1
 244   1              ET0=1;  //T0¿ªÖÐ¶Ï
 245   1              EA=1;   //CPU¿ªÖÐ¶Ï      
 246   1              while(1)
 247   1              {
 248   2                      music_play();   //¸ù¾Ýµ±Ç°×´Ì¬²¥·ÅÏàÓ¦¸èÇúµÄÄ³¸öÒô·û
 249   2      
 250   2                      KEY();
 251   2      
 252   2              }
 253   1      } 
 254          
 255          void delayms(unsigned int t)       //MSÑÓÊ±×Ó³ÌÐò
 256          {
 257   1              unsigned int i,j;
 258   1              for(i=0;i<t;i++)
 259   1              {
 260   2                      for(j=0;j<123;j++)
 261   2                              ;
 262   2              }
 263   1      }
 264          
 265          void delay(unsigned char t)         //ÑÓÊ±×Óº¯Êý,¿ØÖÆ·¢ÒôµÄÊ±¼ä³¤¶È,Ã¿¸ö½ÚÅÄ0.4S
 266          {
 267   1              unsigned char t1;
 268   1              unsigned long t2;
 269   1              for(t1=0;t1<t;t1++)            //Ç¶Ì×Ñ­»·, ¹²ÑÓÊ±t¸ö°ëÅÄ
 270   1              {
 271   2              for(t2=0;t2<2000;t2++) //ÑÓÊ±ÆÚ¼ä, ¿É½øÈëT0ÖÐ¶ÏÈ¥·¢Òô
 272   2              {
 273   3                      KEY();
 274   3              }
 275   2              }
 276   1              TR0=0;                         //¹Ø±ÕT0, Í£Ö¹·¢Òô
 277   1      }
 278          
 279          void timer0(void) interrupt 1  //T0ÖÐ¶Ï³ÌÐò,¿ØÖÆ·¢ÒôµÄÒôµ÷
 280          {
 281   1      #if(0)
                  
                  static u8 ci = 2;   //Õ¼¿Õ£¬¼õÐ¡ÒôÁ¿
                  static u8 ciRL = 2;
                  if(ci){
                      ci--;
                  }else{
                      ci = ciRL;
                      speaker=!speaker;//Êä³ö·½²¨, ·¢Òô
                  }  
              #endif    
 292   1      
 293   1          
 294   1          speaker=!speaker;//Êä³ö·½²¨, ·¢Òô
 295   1              TH0=timer0h;     //ÏÂ´ÎµÄÖÐ¶ÏÊ±¼ä,Õâ¸öÊ±¼ä¿ØÖÆÒôµ÷¸ßµÍ
 296   1              TL0=timer0l;
 297   1       }
 298          
 299          void song(void)         //ÑÝ×àÒ»¸öÒô·û
 300          {
C51 COMPILER V9.01   µ¥Æ¬»_Éî_®                                                            05/24/2018 08:51:24 PAGE 6   

 301   1              TH0=timer0h;    //¿ØÖÆÒôµ÷
 302   1              TL0=timer0l;
 303   1              if((timer0h!=0)||(timer0l!=0))
 304   1                      TR0=1;              //Æô¶¯T0, ÓÉT0Êä³ö·½²¨·¢Òô
 305   1              delay(time);    //Ã¿¸öÒô·ûµÄÑÝ×àÊ±¼ä
 306   1      }
 307          ////////////////////////////////////////////////////////////////////////////////////
 308          void music_play(void)//²¥·ÅÏàÓ¦¸èÇúµÄÄ³¸öÒô·û
 309          {
 310   1              if((music_num==1)&&(play_enable==1))
 311   1              {
 312   2                      fre=song1[num]+12*song1[num+1]-1;//µÚi¸öÊÇÒô·û,µÚi+1¸öÊÇµÚ¼¸¸ö°Ë¶È
 313   2                      timer0h=FREQH[fre];                 //´ÓÊý¾Ý±íÖÐ¶Á³öÆµÂÊÊýÖµ,Êµ¼ÊÉÏÊÇ¶¨Ê±µÄÊ±¼ä³¤¶È
 314   2              timer0l=FREQL[fre];
 315   2              time=song1[num+2];              //¶Á³öÊ±¼ä³¤¶ÈÊýÖµ
 316   2              num+=3;
 317   2                      if(fre<0)               //ÅÐ¶Ï¸èÇúµÄ½áÊøÎ»,½áÊøºó×ªµ½ÏÂÒ»Ê×
 318   2                      {
 319   3                              num=0;      //ÏÂÒ»Ê×´ÓÍ·²¥·Å
 320   3                              music_num=2;
 321   3              }
 322   2                      song();         //·¢³öÒ»¸öÒô·û
 323   2              }
 324   1      ////////////////////////////////////////////////////////////////////////////////////
 325   1              if((music_num==2)&&(play_enable==1))
 326   1              {  
 327   2                      fre=song2[num]+12*song2[num+1]-1;
 328   2                      timer0h=FREQH[fre];
 329   2              timer0l=FREQL[fre];
 330   2              time=song2[num+2];
 331   2              num+=3;
 332   2                      if(fre<0)
 333   2                      {
 334   3                              num=0;
 335   3                              music_num=3;
 336   3              }
 337   2                      song();         
 338   2              }
 339   1      ////////////////////////////////////////////////////////////////////////////////////
 340   1                      if((music_num==3)&&(play_enable==1))
 341   1              {  
 342   2                      fre=song3[num]+12*song3[num+1]-1;
 343   2                      timer0h=FREQH[fre];
 344   2              timer0l=FREQL[fre];
 345   2              time=song3[num+2];
 346   2              num+=3;
 347   2                      if(fre<0)
 348   2                      {
 349   3                              num=0;
 350   3                              music_num=4;
 351   3              }
 352   2                      song();         
 353   2              }
 354   1      ////////////////////////////////////////////////////////////////////////////////////
 355   1              if((music_num==4)&&(play_enable==1))
 356   1              {
 357   2                      fre=song2[num]+12*song2[num+1]-1;
 358   2                      timer0h=FREQH[fre];
 359   2              timer0l=FREQL[fre];
 360   2              time=song2[num+2];
 361   2              num+=3;
 362   2                      if(fre<0)
C51 COMPILER V9.01   µ¥Æ¬»_Éî_®                                                            05/24/2018 08:51:24 PAGE 7   

 363   2                      {
 364   3                              num=0;
 365   3                              music_num=5;
 366   3              }                                                                
 367   2                      song();         
 368   2              }
 369   1      ////////////////////////////////////////////////////////////////////////////////////
 370   1              if((music_num==5)&&(play_enable==1))
 371   1              {
 372   2                      fre=song5[num]+12*song5[num+1]-1;
 373   2                      timer0h=FREQH[fre];
 374   2              timer0l=FREQL[fre];
 375   2              time=song5[num+2];
 376   2              num+=3;
 377   2                      if(fre<0)
 378   2                      {
 379   3                              num=0;
 380   3                              music_num=6;
 381   3              }
 382   2                      song();         
 383   2              }
 384   1      ////////////////////////////////////////////////////////////////////////////////////
 385   1              if((music_num==6)&&(play_enable==1))
 386   1              {
 387   2                      fre=song6[num]+12*song6[num+1]-1;
 388   2                      timer0h=FREQH[fre];
 389   2              timer0l=FREQL[fre];
 390   2              time=song6[num+2];
 391   2              num+=3;
 392   2                      if(fre<0)
 393   2                      {
 394   3                              num=0;
 395   3                              music_num=1;
 396   3              }
 397   2                      song();         
 398   2              }
 399   1      ////////////////////////////////////////////////////////////////////////////////////
 400   1      if((music_num==7)&&(play_enable==1))
 401   1              {
 402   2                      fre=song7[num]+12*song7[num+1]-1;
 403   2                      timer0h=FREQH[fre];
 404   2              timer0l=FREQL[fre];
 405   2              time=song7[num+2];
 406   2              num+=3;
 407   2                      if(fre<0)
 408   2                      {
 409   3                              num=0;
 410   3                              music_num=1;
 411   3              }
 412   2                      song();         
 413   2              }
 414   1      ////////////////////////////////////////////////////////////////////////////////////
 415   1      if((music_num==8)&&(play_enable==1))
 416   1              {
 417   2                      fre=song8[num]+12*song8[num+1]-1;
 418   2                      timer0h=FREQH[fre];
 419   2              timer0l=FREQL[fre];
 420   2              time=song8[num+2];
 421   2              num+=3;
 422   2                      if(fre<0)
 423   2                      {
 424   3                              num=0;
C51 COMPILER V9.01   µ¥Æ¬»_Éî_®                                                            05/24/2018 08:51:24 PAGE 8   

 425   3                              music_num=1;
 426   3              }
 427   2                      song();         
 428   2              }
 429   1      ////////////////////////////////////////////////////////////////////////////////////
 430   1      }
 431          //³ÌÐò½áÊø
 432          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1341    ----
   CONSTANT SIZE    =   2464    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      8       6
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
